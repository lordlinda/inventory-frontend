(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,n){},137:function(e,t,n){},163:function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(0),s=n(46),a=n.n(s),i=(n(135),n(85)),o=n(18),j=n.n(o),u=n(28),d=n(20),l=(n(137),n(45)),b=n(61),O=n(176),h=n(177),p=n(29),v=n.n(p);var x=function(e){var t=Object(r.useState)(""),n=Object(d.a)(t,2),s=n[0],a=n[1],i=Object(r.useState)(""),o=Object(d.a)(i,2),l=o[0],b=o[1],O=function(){var t=Object(u.a)(j.a.mark((function t(n){var c;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),!s){t.next=6;break}return c={name:s,description:l},console.log(c),t.next=6,v.a.post("https://strapi-inventory.herokuapp.com/drugs",c).then((function(t){e.addProduct(t.data)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Add Product"}),Object(c.jsxs)("form",{className:"ui form",onSubmit:O,children:[Object(c.jsx)("div",{className:"equal width fields",children:Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{children:"Name"}),Object(c.jsx)("div",{className:"ui fluid input",children:Object(c.jsx)("input",{type:"text",value:s,onChange:function(e){return a(e.target.value)}})})]})}),Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{children:"Description"}),Object(c.jsx)("textarea",{value:l,onChange:function(e){return b(e.target.value)},placeholder:"Tell us more about the drug...",rows:"3"})]}),Object(c.jsx)("div",{className:"field",children:Object(c.jsx)("button",{className:"ui primary button",children:"Submit"})})]})]})};var f=function(e){var t=e.products,n=e.stockEvents,s=Object(r.useState)(!1),a=Object(d.a)(s,2),i=a[0],o=a[1];return console.log(e),Object(c.jsx)("div",{className:"StockEventTable",children:Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Musawo's Drugstore Inventory"}),Object(c.jsxs)("a",{onClick:function(){return o(!i)},children:[Object(c.jsx)(b.a,{name:"plus"}),"Add New Product"]}),Object(c.jsxs)(O.a,{size:"tiny",open:i,onClose:function(){return o(!1)},children:[Object(c.jsx)(O.a.Content,{children:Object(c.jsx)(x,{addProduct:function(t){e.addProduct(t)}})}),Object(c.jsx)(O.a.Actions,{children:Object(c.jsx)(h.a,{positive:!0,onClick:function(){return o(!1)},children:"close"})})]}),Object(c.jsx)("div",{className:"ui cards",children:t.map((function(e){return Object(c.jsx)("div",{className:"ui card",children:Object(c.jsxs)("div",{className:"content",children:[Object(c.jsx)(l.b,{to:"/product/".concat(e.name),children:Object(c.jsx)("div",{className:"header",children:e.name})}),Object(c.jsxs)("div",{className:"meta",children:[n.filter((function(t){var n;return(null===(n=t.drug)||void 0===n?void 0:n._id)===e._id})).reduce((function(e,t){return e+t.qty}),0)," ","stock left"]}),Object(c.jsx)("div",{className:"description",children:e.description})]})},e._id)}))})]})})},m=n(10),k=(n(162),n(174));var y=function(e){var t=e.stockEvents;return Object(c.jsx)("div",{className:"ui card",children:t.map((function(e){return Object(c.jsxs)("div",{className:"content",children:[Object(c.jsxs)("div",{className:"meta",children:["QTY: ",e.qty]}),Object(c.jsx)("div",{className:"description",children:"".concat(e.type,"ed stock")})]},e._id)}))})},g=n(83),N=n(102);var w=function(e){var t=e.product,n=e.addStockEvent,s=Object(r.useState)({qty:"",type:""}),a=Object(d.a)(s,2),i=a[0],o=a[1],l=i.qty,b=i.type,O=function(e){o(Object(N.a)(Object(N.a)({},i),{},Object(g.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(u.a)(j.a.mark((function e(c){var r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c.preventDefault(),!t||!b){e.next=5;break}return r={qty:"add"===b?+l:-l,type:b,drug:t[0]._id},e.next=5,v.a.post("https://strapi-inventory.herokuapp.com/stockevents",r).then((function(e){n(e.data)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"New Stock Event"}),Object(c.jsxs)("form",{className:"ui form",onSubmit:h,children:[Object(c.jsxs)("div",{className:"equal width fields",children:[Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{children:"qty"}),Object(c.jsx)("input",{type:"number",value:l,name:"qty",onChange:O})]}),Object(c.jsxs)("div",{className:"field",children:[Object(c.jsx)("label",{}),Object(c.jsxs)("select",{name:"type",onChange:O,value:b,children:[Object(c.jsx)("option",{value:"",children:"select type"}),Object(c.jsx)("option",{value:"add",children:"add"}),Object(c.jsx)("option",{value:"remove",children:"remove"})]})]})]}),Object(c.jsx)("button",{className:"ui primary button",children:"Create"})]})]})};var S=function(e){var t=e.products,n=Object(m.f)().name,s=Object(r.useState)([]),a=Object(d.a)(s,2),o=a[0],l=a[1],b=Object(r.useState)(!1),p=Object(d.a)(b,2),x=p[0],f=p[1],k=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://strapi-inventory.herokuapp.com/stockevents");case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){k()}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:n}),Object(c.jsx)("br",{}),Object(c.jsx)(h.a,{onClick:function(){return f(!x)},children:"Add new Event"}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsxs)(O.a,{size:"tiny",open:x,onClose:function(){return f(!1)},children:[Object(c.jsx)(O.a.Content,{children:Object(c.jsx)(w,{product:t.filter((function(e){return e.name===n})),addStockEvent:function(e){console.log(e),l([e].concat(Object(i.a)(o)))}})}),Object(c.jsx)(O.a.Actions,{children:Object(c.jsx)(h.a,{positive:!0,onClick:function(){return f(!1)},children:"close"})})]}),Object(c.jsxs)("div",{className:"ui cards",children:[Object(c.jsx)("h4",{children:"Stock Details"}),Object(c.jsx)(y,{stockEvents:o.filter((function(e){var t;return(null===(t=e.drug)||void 0===t?void 0:t.name)===n}))})]})]})},C=n(175);var E=function(){return Object(c.jsx)("div",{style:{marginTop:"-20px"},children:Object(c.jsx)(C.a,{children:Object(c.jsx)(C.a.Item,{name:"Home",children:Object(c.jsx)(l.b,{to:"/",children:"Home"})})})})};var q=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],s=t[1],a=Object(r.useState)([]),o=Object(d.a)(a,2),b=o[0],O=o[1],h=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://strapi-inventory.herokuapp.com/stockevents");case 2:t=e.sent,O(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=Object(u.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://strapi-inventory.herokuapp.com/drugs");case 2:t=e.sent,s(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){h(),p()}),[]),console.log(n),Object(c.jsx)("div",{children:Object(c.jsx)("div",{className:"App",children:Object(c.jsxs)(l.a,{children:[Object(c.jsx)(E,{}),Object(c.jsx)("br",{}),Object(c.jsx)("br",{}),Object(c.jsx)(k.a,{children:Object(c.jsxs)(m.c,{children:[Object(c.jsx)(m.a,{path:"/product/:name",children:Object(c.jsx)(S,{products:n})}),Object(c.jsx)(m.a,{path:"/",children:Object(c.jsx)(f,{products:n,stockEvents:b,addProduct:function(e){s([e].concat(Object(i.a)(n)))}})})]})})]})})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,180)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),r(e),s(e),a(e)}))};a.a.render(Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(q,{})}),document.getElementById("root")),P()}},[[163,1,2]]]);
//# sourceMappingURL=main.27f9ce32.chunk.js.map