(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,c){},137:function(e,t,c){},163:function(e,t,c){"use strict";c.r(t);var n=c(2),r=c(0),a=c(46),s=c.n(a),i=(c(135),c(85)),j=c(14),o=c.n(j),u=c(26),d=c(20),l=(c(137),c(45)),b=c(61),O=c(176),h=c(177),p=c(27),v=c.n(p);var x=function(e){var t=Object(r.useState)(""),c=Object(d.a)(t,2),a=c[0],s=c[1],i=Object(r.useState)(""),j=Object(d.a)(i,2),l=j[0],b=j[1],O=function(){var t=Object(u.a)(o.a.mark((function t(c){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c.preventDefault(),!a){t.next=6;break}return n={name:a,description:l},console.log(n),t.next=6,v.a.post("https://strapi-inventory.herokuapp.com/drugs",n).then((function(t){e.addProduct(t.data)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)("h1",{children:"Add Product"}),Object(n.jsxs)("form",{className:"ui form",onSubmit:O,children:[Object(n.jsx)("div",{className:"equal width fields",children:Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{children:"Name"}),Object(n.jsx)("div",{className:"ui fluid input",children:Object(n.jsx)("input",{type:"text",value:a,onChange:function(e){return s(e.target.value)}})})]})}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{children:"Description"}),Object(n.jsx)("textarea",{value:l,onChange:function(e){return b(e.target.value)},placeholder:"Tell us more about the drug...",rows:"3"})]}),Object(n.jsx)("div",{className:"field",children:Object(n.jsx)("button",{className:"ui primary button",children:"Submit"})})]})]})};var f=function(e){var t=Object(r.useState)([]),c=Object(d.a)(t,2),a=c[0],s=c[1],i=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://strapi-inventory.herokuapp.com/stockevents");case 2:t=e.sent,s(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),j=e.products,p=Object(r.useState)(!1),f=Object(d.a)(p,2),m=f[0],y=f[1];return Object(r.useEffect)((function(){i()}),[]),Object(n.jsx)("div",{className:"StockEventTable",children:Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:"Musawo's Drugstore Inventory"}),Object(n.jsxs)("a",{onClick:function(){return y(!m)},href:"#",children:[Object(n.jsx)(b.a,{name:"plus"}),"Add New Product"]}),Object(n.jsxs)(O.a,{size:"tiny",open:m,onClose:function(){return y(!1)},children:[Object(n.jsx)(O.a.Content,{children:Object(n.jsx)(x,{addProduct:function(t){e.addProduct(t)}})}),Object(n.jsx)(O.a.Actions,{children:Object(n.jsx)(h.a,{positive:!0,onClick:function(){return y(!1)},children:"close"})})]}),Object(n.jsx)("div",{className:"ui cards",children:j.map((function(e){return Object(n.jsx)("div",{className:"ui card",children:Object(n.jsxs)("div",{className:"content",children:[Object(n.jsx)(l.b,{to:"/product/".concat(e.name),children:Object(n.jsx)("div",{className:"header",children:e.name})}),Object(n.jsxs)("div",{className:"meta",children:[a.filter((function(t){var c;return(null===(c=t.drug)||void 0===c?void 0:c._id)===e._id})).reduce((function(e,t){return e+t.qty}),0)," ","stock left"]}),Object(n.jsx)("div",{className:"description",children:e.description})]})},e._id)}))})]})})},m=c(10),y=(c(162),c(174));var k=function(e){var t=e.stockEvents;return Object(n.jsx)("div",{className:"ui card",children:t.map((function(e){return Object(n.jsxs)("div",{className:"content",children:[Object(n.jsxs)("div",{className:"meta",children:["QTY: ",e.qty]}),Object(n.jsx)("div",{className:"description",children:"add"===e.type?"added stock":"removed stock"})]},e._id)}))})},N=c(83),g=c(102);var w=function(e){var t=e.product,c=e.addStockEvent,a=Object(r.useState)({qty:"",type:""}),s=Object(d.a)(a,2),i=s[0],j=s[1],l=i.qty,b=i.type,O=function(e){j(Object(g.a)(Object(g.a)({},i),{},Object(N.a)({},e.target.name,e.target.value)))},h=function(){var e=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!t||!b){e.next=5;break}return r={qty:"add"===b?+l:-l,type:b,drug:t[0]._id},e.next=5,v.a.post("https://strapi-inventory.herokuapp.com/stockevents",r).then((function(e){c(e.data)}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.jsxs)("div",{children:[Object(n.jsx)("h3",{children:"New Stock Event"}),Object(n.jsxs)("form",{className:"ui form",onSubmit:h,children:[Object(n.jsxs)("div",{className:"equal width fields",children:[Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{children:"qty"}),Object(n.jsx)("input",{type:"number",value:l,name:"qty",onChange:O})]}),Object(n.jsxs)("div",{className:"field",children:[Object(n.jsx)("label",{}),Object(n.jsxs)("select",{name:"type",onChange:O,value:b,children:[Object(n.jsx)("option",{value:"",children:"select type"}),Object(n.jsx)("option",{value:"add",children:"add"}),Object(n.jsx)("option",{value:"remove",children:"remove"})]})]})]}),Object(n.jsx)("button",{className:"ui primary button",children:"Create"})]})]})};var S=function(e){var t=e.products,c=Object(m.f)().name,a=Object(r.useState)([]),s=Object(d.a)(a,2),j=s[0],l=s[1],b=Object(r.useState)(!1),p=Object(d.a)(b,2),x=p[0],f=p[1],y=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://strapi-inventory.herokuapp.com/stockevents");case 2:t=e.sent,l(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){y()}),[]),Object(n.jsxs)("div",{children:[Object(n.jsx)("h2",{children:c}),Object(n.jsx)("br",{}),Object(n.jsx)(h.a,{onClick:function(){return f(!x)},children:"Add new Event"}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsxs)(O.a,{size:"tiny",open:x,onClose:function(){return f(!1)},children:[Object(n.jsx)(O.a.Content,{children:Object(n.jsx)(w,{product:t.filter((function(e){return e.name===c})),addStockEvent:function(e){l([e].concat(Object(i.a)(j)))}})}),Object(n.jsx)(O.a.Actions,{children:Object(n.jsx)(h.a,{positive:!0,onClick:function(){return f(!1)},children:"close"})})]}),Object(n.jsxs)("div",{className:"ui cards",children:[Object(n.jsx)("h4",{children:"Stock Details"}),Object(n.jsx)(k,{stockEvents:j.filter((function(e){var t;return(null===(t=e.drug)||void 0===t?void 0:t.name)===c}))})]})]})},C=c(175);var E=function(){return Object(n.jsx)("div",{style:{marginTop:"-20px"},children:Object(n.jsx)(C.a,{children:Object(n.jsx)(C.a.Item,{name:"Home",children:Object(n.jsx)(l.b,{to:"/",children:"Home"})})})})};var q=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),c=t[0],a=t[1],s=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("https://strapi-inventory.herokuapp.com/drugs");case 2:t=e.sent,a(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){s()}),[]),Object(n.jsx)("div",{children:Object(n.jsx)("div",{className:"App",children:Object(n.jsxs)(l.a,{children:[Object(n.jsx)(E,{}),Object(n.jsx)("br",{}),Object(n.jsx)("br",{}),Object(n.jsx)(y.a,{children:Object(n.jsxs)(m.c,{children:[Object(n.jsx)(m.a,{path:"/product/:name",children:Object(n.jsx)(S,{products:c})}),Object(n.jsx)(m.a,{path:"/",children:Object(n.jsx)(f,{products:c,addProduct:function(e){a([e].concat(Object(i.a)(c)))}})})]})})]})})})},P=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,180)).then((function(t){var c=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;c(e),n(e),r(e),a(e),s(e)}))};s.a.render(Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(q,{})}),document.getElementById("root")),P()}},[[163,1,2]]]);
//# sourceMappingURL=main.733d91af.chunk.js.map